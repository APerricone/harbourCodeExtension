{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Harbour",
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#keywords"
		},
		{
			"include": "#numbers"
		},
		{
			"include": "#c_code"
		}
	],
	"repository": {
		"numbers": {
			"patterns": [
				{
					"match": "(?i)\\b[0-9]+(\\.[0-9]+)?(?i:e[0-9]+)?\\b",
					"name": "constant.numeric.harbour"
				},
				{
					"match": "(?i)\\b0x[0-9a-f]+\\b",
					"name": "constant.numeric.exadecimal.harbour"
				}
			]
		},
		"comments": {
			"patterns": [
				{
					"name": "comment.block.harbour",
					"begin": "/\\*",
					"end": "\\*/"
				},
				{
					"name": "comment.singleline.slash.harbour",
					"match": "//(.*)"
				},
				{
					"name": "comment.singleline.ampersand.harbour",
					"match": "&&(.*)"
				},
				{
					"name": "comment.startline.note.harbour",
					"match": "^\\s*NOTE\\s+(.*)"
				},
				{
					"name": "comment.startline.asterisk.harbour",
					"match": "^\\s*\\*\\s+(.*)"
				}
			]
		},
		"keywords": {
			"patterns": [{
				"name": "keyword.control.harbour",
				"match": "\\b(?i:if|ELSEIF|ELSE|end\\s*(?:if|while|case|do|switch|class)?|for(?:\\s+each)?|to|next|do|while|switch|case|endcase|otherwise|exit)\\b"
			},
			{
				"name": "keyword.control.harbour",
				"match": "\\b(?i:static|return|class|data)\\b"
			},
			{
				"name": "meta.function.harbour",
				"match": "(?i)\\b(method|proc(?:e(?:d(?:u(?:r(?:e)?)?)?)?)?|func(?:t(?:i(?:o(?:n)?)?)?)?)\\s+([a-z_][a-z0-9]*)\\s*\\((?:\\s*([a-z_][a-z0-9]*)\\s*,?)*\\)",
				"captures": {
					"1": { "name": "keyword.function.harbour" },
					"2": { "name": "entity.name.function.harbour" },
					"3": { "name": "variable.parameter.harbour" }
				}
			},
			{
				"name": "keyword.declarations.harbour",
				"match": "\\b(?i:local|private|public|field|thread|memvar|parameter)\\b"
			},
			{
				"name": "keyword.reserved.harbour",
				"match": "(?i)\\b(nil)\\b"
			},
			{
				"name": "meta.function.harbour",
				"match": "(?i)\\b(([a-z_][a-z_0-9]+)\\s*\\()",
				"captures": {
					"1": { "name": "entity.name.function.harbour" }
				}
			},
			{
				"name": "keyword.classes.harbour",
				"match": "\\b(?i:(?:end)?class(?:data)?|method|data|message|init|constructor|destructor)\\b"
			},
			{
				"name": "keyword.operator.logical.harbour",
				"match": "(?i)(\\.(T|F|and|or|not)\\.)"
			},
			{
				"name": "meta.preprocessor.include.harbour",
				"begin": "(?i:^\\s*#include\\s)",
				"end": "(?=(?://|&&|/\\*))|(?<!;)(?=\n)",
				"patterns": [
					{
						"include": "#strings"
					},
					{
						"name": "string.quoted.angle.harbour",
						"begin": "<",
						"end": ">"
					}
				]
			},
			{
				"name": "meta.preprocessor.various.harbour",
				"match": "(?i)(^\\s*#[a-zA-z]+)"
			}]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.harbour",
					"begin": "\"",
					"end": "\""
				},
				{
					"name": "string.quoted.single.harbour",
					"begin": "'",
					"end": "'"
				},
				{
					"name": "string.square.harbour",
					"begin": "(?<![a-z0-9])\\[",
					"end": "\\]"
				}
			]
		},
		"c_code": {
			"patterns": [
				{
					"begin": "(?i:BEGINDUMP)",
					"end": "(?i:ENDDUMP)",
					"contentName": "source.c.embedded.harbour",
					"patterns": [
						{
							"match": "\\b(HB_FUNC|hb_ret[a-z]+|hb_par[a-z]+)\\s*\\(",
							"name": "keyword.connection.harbor"
						},
						{
							"include": "source.c"
						}
					]
				}
			]
		}
	},
	"scopeName": "source.harbour"
}
